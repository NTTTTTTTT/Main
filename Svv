local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")

local PlaceId = game.PlaceId
local JobId = game.JobId

local function GetServers(cursor)
    local url = "https://games.roblox.com/v1/games/" .. PlaceId .. "/servers/Public?sortOrder=Asc&limit=100"
    if cursor then
        url = url .. "&cursor=" .. cursor
    end
    return HttpService:JSONDecode(game:HttpGet(url))
end

local function HopToLowServer()
    local cursor = nil
    local bestServer = nil
    local lowestPlayers = math.huge

    while true do
        local data = GetServers(cursor)

        for _, server in ipairs(data.data) do
            if server.id ~= JobId and server.playing < server.maxPlayers then
                if server.playing < lowestPlayers then
                    lowestPlayers = server.playing
                    bestServer = server
                end
            end
        end

        cursor = data.nextPageCursor
        if not cursor then break end
    end

    if bestServer then
        TeleportService:TeleportToPlaceInstance(PlaceId, bestServer.id, game.Players.LocalPlayer)
    end
end

HopToLowServer()
